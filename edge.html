<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Edge of TOME</title>
    <style>
        body{
            font-family: Arial;
        }
        h1{
            color: #0099FF;
        }
        p{
            color: #000000;
            font-size: 20px;
        }
        tr{
            background-color: #e5e5e5;
            border: solid 1px #CCC; padding: 0 1ex;
        }
        td{
            background-color: #ffffff;
            border: solid 1px #CCC; padding: 0 1ex;
        }
        table{
            color: #000000;
        }
    </style>
</head>
<body>
<h1>Edge of TOME</h1>
<p>This table shows the basic information of an individual edge. </p>
<div id="table"></div>

</body>

<script type="text/javascript" src="d3.v3.min.js"></script>

<!-- load the function file you need before you call it... -->
<script type="text/javascript" src="tabulate.js"></script>

<script type="text/javascript">
    function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
    console.log('Query variable %s not found', variable);
    }

   // alert(getQueryVariable('edge_id'));
   var edge_id = getQueryVariable('source_node_id') + '_' + getQueryVariable('target_node_id');

    //Load in contents of CSV file, and do things to the data.
    d3.tsv("edge_information.tsv", function(error, myData) {
        if (error) {
            console.log("Had an error loading file.");
        }
        // We'll be using simpler data as values, not objects.
        var myArray = [];
        myData.forEach(function(d, i){
            // Add a new array with the values of each:
            myArray.push([d.key, d[edge_id]]);
        });
        console.log(myData);
        console.log(myArray);

        // You could also have made the new array with a map function!
        //using colors and fonts from the UNICEF Style Guide
        var table = d3.select("#table").append("table")
                    .attr("style", "font-size: 25px");
        var header = table.append("thead").append("tr");
            header
                .selectAll("th")
                .data(["Key", "Value"])
                .enter()
                .append("th")
                .text(function(d) { return d; });
        var tablebody = table.append("tbody");
        rows = tablebody
                .selectAll("tr")
                .data(myArray)
                .enter()
                .append("tr");
        // We built the rows using the nested array - now each row has its own array.
        cells = rows.selectAll("td")
            // each row has data associated; we get it and enter it for the cells.
                .data(function(d) {
                    console.log(d);
                    return d;
                })
                .enter()
                .append("td")
                .html(function(d) {
                    return d;
                });
    });
</script>

</html>